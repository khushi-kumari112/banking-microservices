# ================================================
# ACCOUNT SERVICE CONFIGURATION
# ================================================
spring.application.name=account-service
server.port=8082

# ================================================
# MYSQL DATABASE CONFIGURATION
# ================================================
spring.datasource.url=jdbc:mysql://localhost:3306/account_service_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=KHU12@shi
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ================================================
# JPA/HIBERNATE CONFIGURATION
# ================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false

# ================================================
# REDIS CONFIGURATION (Caching)
# ================================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.timeout=60000

# ================================================
# KAFKA CONFIGURATION
# ================================================
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# ================================================
# FEIGN CLIENT CONFIGURATION
# ================================================
# User Service URL
user.service.url=http://localhost:8081

# Feign Timeouts
feign.client.config.default.connectTimeout=5000
feign.client.config.default.readTimeout=5000
feign.client.config.default.loggerLevel=full

# Enable Feign Clients
spring.cloud.openfeign.client.config.default.connect-timeout=5000
spring.cloud.openfeign.client.config.default.read-timeout=5000

# ================================================
# CIRCUIT BREAKER (Resilience4j)
# ================================================
resilience4j.circuitbreaker.instances.userService.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.userService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.userService.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.userService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.userService.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.userService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.userService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.userService.eventConsumerBufferSize=10

# ================================================
# ACCOUNT BUSINESS RULES
# ================================================
# Account Number Generation
account.number.prefix=ACC
account.number.length=14

# IFSC Code Generation
account.ifsc.bank-code=BNKL
account.ifsc.length=11

# Account Limits (Real Banking Standards)
account.savings.min-balance=1000.00
account.savings.max-balance=1000000.00
account.savings.daily-withdrawal-limit=50000.00
account.savings.monthly-transaction-limit=100

account.current.min-balance=5000.00
account.current.max-balance=10000000.00
account.current.daily-withdrawal-limit=200000.00
account.current.monthly-transaction-limit=1000

account.salary.min-balance=0.00
account.salary.max-balance=500000.00
account.salary.daily-withdrawal-limit=100000.00

account.wallet.min-balance=0.00
account.wallet.max-balance=100000.00
account.wallet.daily-transaction-limit=20000.00

# Maximum accounts per user
account.max-per-user=5
account.max-savings-per-user=2
account.max-current-per-user=1

# ================================================
# LOGGING CONFIGURATION
# ================================================
logging.level.root=INFO
logging.level.com.banking.account_service=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.kafka=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.com.banking.account_service.feign=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ================================================
# ACTUATOR CONFIGURATION
# ================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true

# ================================================
# SECURITY CONFIGURATION
# ================================================
spring.security.user.name=admin
spring.security.user.password=admin

# Enable request context for Feign
spring.mvc.async.request-timeout=30000
feign.hystrix.enabled=false